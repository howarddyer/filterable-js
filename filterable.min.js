/*
 * filterable.js v1.0
 * Created by Howard Dyer (http://www.howard-dyer.co.uk)
 * Licensed under MIT (https://github.com/howarddyer/filterable.js/blob/master/LICENSE)
*/
!function(e){e.fn.filterable=function(i){function t(){n.bindOptions(),n.bindKnockoutModel(),bindEngageFiltering=function(){n.bindEngageFiltering(element,settings.activeClass)},bindDisengageFiltering=function(){n.bindDisengageFiltering(element,settings.activeClass)},bindFiltering=function(){n.bindFiltering(element,settings.activeClass,settings.disabledClass)},bindUIActions=function(){n.bindUIActions(element,settings.activeClass,settings.disabledClass,filterType,filterInactive,filterActive,filterDisabled)}}var n=this;n.bindOptions=function(){knockoutBind=!1,element=this.selector,settings=e.extend({filterType:"background",activeClass:"active",disabledClass:"disabled"},{});var t={background:{type:"background",inactive:"black",active:"green",disabled:"inherit"},border:{type:"border",inactive:"none",active:"solid 1px green",disabled:"none"},color:{type:"color",inactive:"inherit",active:"green",disabled:"inherit"},display:{type:"display",inactive:"inherit",active:"inherit",disabled:"none"},opacity:{type:"opacity",inactive:"inherit",active:"1",disabled:".3"},visibility:{type:"visibility",inactive:"inherit",active:"visible",disabled:"hidden"}};if(i.filterType){var n=0;e.each(t,function(e){return e==i.filterType?(filterType=i.filterType,!1):(n++,6==n&&(filterType=settings.filterType,console.log("Filterable.js ERROR - filterType is not valid"),console.log("Please use: background, border, color, display, opacity, visibility")),void 0)})}else filterType=settings.filterType;switch(filterType){case"background":filterInactive=i.filterInactive||t.background.inactive,filterActive=i.filterActive||t.background.active,filterDisabled=i.filterDisabled||t.background.disabled;break;case"border":filterInactive=i.filterInactive||t.border.inactive,filterActive=i.filterActive||t.border.active,filterDisabled=i.filterDisabled||t.border.disabled;break;case"color":filterInactive=i.filterInactive||t.color.inactive,filterActive=i.filterActive||t.color.active,filterDisabled=i.filterDisabled||t.color.disabled;break;case"display":filterInactive=i.filterInactive||t.display.inactive,filterActive=i.filterActive||t.display.active,filterDisabled=i.filterDisabled||t.display.disabled;break;case"opacity":filterInactive=i.filterInactive||t.opacity.inactive,filterActive=i.filterActive||t.opacity.active,filterDisabled=i.filterDisabled||t.opacity.disabled;break;case"visibility":filterInactive=i.filterInactive||t.visibility.inactive,filterActive=i.filterActive||t.visibility.active,filterDisabled=i.filterDisabled||t.visibility.disabled}},n.bindKnockoutModel=function(){var e=function(){this.filterQuery=ko.observable(""),this.filterQuery.subscribe(function(e){filterQuery=e,bindFiltering()}),this.searchQuery=ko.computed(function(){return this.filterQuery()},this),this.matchedRecords=ko.computed(function(){return this.filterQuery(),"undefined"==typeof n.matchedRecords||""==n.matchedRecords?"No matches":"1"==n.matchedRecords?n.matchedRecords+" match":n.matchedRecords+" matches"},this),this.filterQuerySelected=ko.observable(!1),this.filterQuerySelected.subscribe(function(e){filterQuerySelected=e,1==filterQuerySelected?("undefined"==typeof filterQuery||""==filterQuery)&&bindEngageFiltering():0==filterQuerySelected&&("undefined"==typeof filterQuery||""==filterQuery)&&bindDisengageFiltering()})};0==knockoutBind&&(ko.applyBindings(new e),knockoutBind=!0)},n.bindEngageFiltering=function(i,t){e(i).each(function(){e(this).addClass(t)}),bindUIActions()},n.bindDisengageFiltering=function(i,t){e(i).each(function(){e(this).removeClass(t)}),bindUIActions()},n.bindFiltering=function(i,t,r){searchTerms=filterQuery.split(","),matchedRecords=0,e(i).each(function(){content=e(this).text();var i=0;e.each(searchTerms,function(e,t){content.toLowerCase().indexOf(t)>=0&&i++}),i!=searchTerms.length?(e(this).removeClass(t),e(this).addClass(r)):(e(this).removeClass(r),e(this).addClass(t),matchedRecords++)}),n.matchedRecords=matchedRecords,bindUIActions()},n.bindUIActions=function(i,t,n,r,l,s,c){"hide"==r?(e(i).show(),e(i+"."+t).show(),e(i+"."+n).hide()):(e(i).css(r,l),e(i+"."+t).css(r,s),e(i+"."+n).css(r,c))},t()}}(jQuery);